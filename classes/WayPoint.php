<?php



class WayPoint
{

    /**
     * Returns $accountname.
     * @see WayPoint::$accountname
     */
    public function getAccountname()
    {
        return $this->accountname;
    }
    
    /**
     * Sets $accountname.
     * @param object $accountname
     * @see WayPoint::$accountname
     */
    public function setAccountname($accountname)
    {
        $this->accountname = (string) $accountname;
    }

    /**
     * Returns $country.
     * @see WayPoint::$country
     */
    public function getCountry()
    {
        return $this->country;
    }
    
    /**
     * Sets $country.
     * @param object $country
     * @see WayPoint::$country
     */
    public function setCountry($country)
    {
        $this->country = (string) $country;
    }
    
    /**
     * Returns $desc.
     * @see WayPoint::$desc
     */
    public function getDesc()
    {
        return $this->desc;
    }
    
    /**
     * Sets $desc.
     * @param object $desc
     * @see WayPoint::$desc
     */
    public function setDesc($desc)
    {
        $this->desc = (string) $desc;
    }
    
    /**
     * Returns $gsCacheContainer.
     * @see WayPoint::$gsCacheContainer
     */
    public function getGsCacheContainer()
    {
        return $this->gsCacheContainer;
    }
    
    /**
     * Sets $gsCacheContainer.
     * @param object $gsCacheContainer
     * @see WayPoint::$gsCacheContainer
     */
    public function setGsCacheContainer($gsCacheContainer)
    {
        $this->gsCacheContainer = (string) $gsCacheContainer;
    }
    
    /**
     * Returns $gsCacheId.
     * @see WayPoint::$gsCacheId
     */
    public function getGsCacheId()
    {
        return $this->gsCacheId;
    }
    
    /**
     * Sets $gsCacheId.
     * @param object $gsCacheId
     * @see WayPoint::$gsCacheId
     */
    public function setGsCacheId($gsCacheId)
    {
        $this->gsCacheId = (string) $gsCacheId;
    }
    
    /**
     * Returns $gsCacheType.
     * @see WayPoint::$gsCacheType
     */
    public function getGsCacheType()
    {
        return $this->gsCacheType;
    }
    
    /**
     * Sets $gsCacheType.
     * @param object $gsCacheType
     * @see WayPoint::$gsCacheType
     */
    public function setGsCacheType($gsCacheType)
    {
        $this->gsCacheType = (string) $gsCacheType;
    }
    
    /**
     * Returns $gsDifficulty.
     * @see WayPoint::$gsDifficulty
     */
    public function getGsDifficulty()
    {
        return $this->gsDifficulty;
    }
    
    /**
     * Sets $gsDifficulty.
     * @param object $gsDifficulty
     * @see WayPoint::$gsDifficulty
     */
    public function setGsDifficulty($gsDifficulty)
    {
        $this->gsDifficulty = (string) $gsDifficulty;
    }
    
    /**
     * Returns $gsPlacedBy.
     * @see WayPoint::$gsPlacedBy
     */
    public function getGsPlacedBy()
    {
        return $this->gsPlacedBy;
    }
    
    /**
     * Sets $gsPlacedBy.
     * @param object $gsPlacedBy
     * @see WayPoint::$gsPlacedBy
     */
    public function setGsPlacedBy($gsPlacedBy)
    {
        $this->gsPlacedBy = (string) $gsPlacedBy;
    }
    
    /**
     * Returns $gsTerrain.
     * @see WayPoint::$gsTerrain
     */
    public function getGsTerrain()
    {
        return $this->gsTerrain;
    }
    
    /**
     * Sets $gsTerrain.
     * @param object $gsTerrain
     * @see WayPoint::$gsTerrain
     */
    public function setGsTerrain($gsTerrain)
    {
        $this->gsTerrain = (string) $gsTerrain;
    }
    
    /**
     * Returns $latitude.
     * @see WayPoint::$latitude
     */
    public function getLatitude()
    {
        return $this->latitude;
    }
    
    /**
     * Sets $latitude.
     * @param object $latitude
     * @see WayPoint::$latitude
     */
    public function setLatitude($latitude)
    {
        $this->latitude = (string) $latitude;
    }
    
    /**
     * Returns $longitude.
     * @see WayPoint::$longitude
     */
    public function getLongitude()
    {
        return $this->longitude;
    }
    
    /**
     * Sets $longitude.
     * @param object $longitude
     * @see WayPoint::$longitude
     */
    public function setLongitude($longitude)
    {
        $this->longitude = (string) $longitude;
    }
    
    /**
     * Returns $name.
     * @see WayPoint::$name
     */
    public function getName()
    {
        return $this->name;
    }
    
    /**
     * Sets $name.
     * @param object $name
     * @see WayPoint::$name
     */
    public function setName($name)
    {
        $this->name = (string) $name;
    }
    
    /**
     * Returns $state.
     * @see WayPoint::$state
     */
    public function getState()
    {
        return $this->state;
    }
    
    /**
     * Sets $state.
     * @param object $state
     * @see WayPoint::$state
     */
    public function setState($state)
    {
        $this->state = (string) $state;
    }
    
    /**
     * Returns $sym.
     * @see WayPoint::$sym
     */
    public function getSym()
    {
        return $this->sym;
    }
    
    /**
     * Sets $sym.
     * @param object $sym
     * @see WayPoint::$sym
     */
    public function setSym($sym)
    {
        $this->sym = (string) $sym;
    }
    
    /**
     * Returns $time.
     * @see WayPoint::$time
     */
    public function getTime()
    {
        return $this->time;
    }
    
    /**
     * Sets $time.
     * @param object $time
     * @see WayPoint::$time
     */
    public function setTime($time)
    {
        $this->time = (string) $time;
    }
    
    /**
     * Returns $url.
     * @see WayPoint::$url
     */
    public function getUrl()
    {
        return $this->url;
    }
    
    /**
     * Sets $url.
     * @param object $url
     * @see WayPoint::$url
     */
    public function setUrl($url)
    {
        $this->url = (string) $url;
    }
    
    /**
     * Returns $urlname.
     * @see WayPoint::$urlname
     */
    public function getUrlname()
    {
        return $this->urlname;
    }
    
    /**
     * Sets $urlname.
     * @param object $urlname
     * @see WayPoint::$urlname
     */
    public function setUrlname($urlname)
    {
        $this->urlname = (string) $urlname;
    }

	private $name;
	private $desc;
	private $time;
	private $url;
	private $urlname;
	private $sym;
	private $gsCacheId;
	private $gsPlacedBy;
	private $gsCacheType;
	private $gsCacheContainer;
	private $gsDifficulty;
	private $gsTerrain;
	private $country;
	private $state;
	
	private $accountname;
	
	private $latitude;
	private $longitude;
	
	public function __construct(){
		
	}
	
	public function distanceTo($lat, $lon){
		$lat1 = deg2rad(floatval($lat));
		$lat2 = deg2rad(floatval($this->getLatitude()));
		$lon1 = deg2rad(floatval($lon));
		$lon2 = deg2rad(floatval($this->getLongitude()));
		
		$w = acos(
			sin($lat1)*sin($lat2)
			+cos($lat1)*cos($lat2)*cos(($lon2-$lon1)));
		$s = $w * 6370;
		return $s;
	}
	
	public function save(){
		global $wpdb;
		
		$result = $wpdb->get_results("SELECT id FROM `".$wpdb->prefix."gcStats_waypoints` WHERE name='".$wpdb->escape($this->getName())."';");
		if(!isset($result[0]->id)){
			gcStats_safe_query("
			INSERT INTO `".$wpdb->prefix."gcStats_waypoints` 
			(`name`,`description`,`time`,`url`,`urlname`,`sym`,`gsCacheId`,`gsPlacedBy`,`gsCacheType`,
			`gsCacheContainer`,`gsDifficulty`,`gsTerrain`,`country`,`state`,`latitude`,`longitude`,`accountname`) 
			VALUES (
			'".$wpdb->escape($this->getName())."',
			'".$wpdb->escape($this->getDesc())."',
			'".$wpdb->escape($this->getTime())."',
			'".$wpdb->escape($this->getUrl())."',
			'".$wpdb->escape($this->getUrlname())."',
			'".$wpdb->escape($this->getSym())."',
			'".$wpdb->escape($this->getGsCacheId())."',
			'".$wpdb->escape($this->getGsPlacedBy())."',
			'".$wpdb->escape($this->getGsCacheType())."',
			'".$wpdb->escape($this->getGsCacheContainer())."',
			'".$wpdb->escape($this->getGsDifficulty())."',
			'".$wpdb->escape($this->getGsTerrain())."',
			'".$wpdb->escape($this->getCountry())."',
			'".$wpdb->escape($this->getState())."',
			'".$wpdb->escape($this->getLatitude())."',
			'".$wpdb->escape($this->getLongitude())."',
			'".$wpdb->escape($this->getAccountname())."'
			);
			");
			return true;
		} else {
			return false;
		}
	}
}

?>
